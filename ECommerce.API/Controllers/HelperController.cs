using ECommerce.API.Extension;
using ECommerce.API.Views.mails;
using ECommerce.BLL.Helper;
using ECommerce.BLL.Interfaces;
using ECommerce.Entity;
using Microsoft.AspNetCore.Mvc;
using Wkhtmltopdf.NetCore;

namespace ECommerce.API.Controllers
{
    [Route("api/[controller]")]
    [ApiController]
    public class HelperController : ControllerBase
    {
        public static IWebHostEnvironment _environment;
        private readonly IGeneratePdf _generatePdf;
        public readonly ICardService _CardService;
        public readonly IAppUserService _AppUserService;
        public HelperController(IWebHostEnvironment environment, IGeneratePdf generatePdf, IAppUserService appUserService)
        {
            _environment = environment;
            _generatePdf = generatePdf;
            _AppUserService = appUserService;
        }

        [HttpPost]
        [Route("/[controller]/[action]")]
        public ActionResult HelperEmailSend()
        {
            var isSended = HelperFunctions.EmailSender("bunyamingurmuc@gmail.com", "mqbdazepqwodgncl", "mahmutgurmuc@gmail.com", "dsadas", "<!DOCTYPE html>\r\n<html lang=\"en\" xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:v=\"urn:schemas-microsoft-com:vml\"\r\n\txmlns:o=\"urn:schemas-microsoft-com:office:office\">\r\n\r\n<head>\r\n\t<meta charset=\"utf-8\"> <!-- utf-8 works for most cases -->\r\n\t<meta name=\"viewport\" content=\"width=device-width\"> <!-- Forcing initial-scale shouldn't be necessary -->\r\n\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <!-- Use the latest (edge) version of IE rendering engine -->\r\n\t<meta name=\"x-apple-disable-message-reformatting\"> <!-- Disable auto-scale in iOS 10 Mail entirely -->\r\n\t<title></title> <!-- The title tag shows in email notifications, like Android 4.4. -->\r\n\r\n\t<link href=\"https://fonts.googleapis.com/css?family=Work+Sans:200,300,400,500,600,700\" rel=\"stylesheet\">\r\n\r\n\t<!-- CSS Reset : BEGIN -->\r\n\t<style>\r\n\t\t/* What it does: Remove spaces around the email design added by some email clients. */\r\n\t\t/* Beware: It can remove the padding / margin and add a background color to the compose a reply window. */\r\n\t\thtml,\r\n\t\tbody {\r\n\t\t\tmargin: 0 auto !important;\r\n\t\t\tpadding: 0 !important;\r\n\t\t\theight: 100% !important;\r\n\t\t\twidth: 100% !important;\r\n\t\t\tbackground: #f1f1f1;\r\n\t\t}\r\n\r\n\t\t/* What it does: Stops email clients resizing small text. */\r\n\t\t* {\r\n\t\t\t-ms-text-size-adjust: 100%;\r\n\t\t\t-webkit-text-size-adjust: 100%;\r\n\t\t}\r\n\r\n\t\t/* What it does: Centers email on Android 4.4 */\r\n\t\tdiv[style*=\"margin: 16px 0\"] {\r\n\t\t\tmargin: 0 !important;\r\n\t\t}\r\n\r\n\t\t/* What it does: Stops Outlook from adding extra spacing to tables. */\r\n\t\ttable,\r\n\t\ttd {\r\n\t\t\tmso-table-lspace: 0pt !important;\r\n\t\t\tmso-table-rspace: 0pt !important;\r\n\t\t}\r\n\r\n\t\t/* What it does: Fixes webkit padding issue. */\r\n\t\ttable {\r\n\t\t\tborder-spacing: 0 !important;\r\n\t\t\tborder-collapse: collapse !important;\r\n\t\t\ttable-layout: fixed !important;\r\n\t\t\tmargin: 0 auto !important;\r\n\t\t}\r\n\r\n\t\t/* What it does: Uses a better rendering method when resizing images in IE. */\r\n\t\timg {\r\n\t\t\t-ms-interpolation-mode: bicubic;\r\n\t\t}\r\n\r\n\t\t/* What it does: Prevents Windows 10 Mail from underlining links despite inline CSS. Styles for underlined links should be inline. */\r\n\t\ta {\r\n\t\t\ttext-decoration: none;\r\n\t\t}\r\n\r\n\t\t/* What it does: A work-around for email clients meddling in triggered links. */\r\n\t\t*[x-apple-data-detectors],\r\n\t\t/* iOS */\r\n\t\t.unstyle-auto-detected-links *,\r\n\t\t.aBn {\r\n\t\t\tborder-bottom: 0 !important;\r\n\t\t\tcursor: default !important;\r\n\t\t\tcolor: inherit !important;\r\n\t\t\ttext-decoration: none !important;\r\n\t\t\tfont-size: inherit !important;\r\n\t\t\tfont-family: inherit !important;\r\n\t\t\tfont-weight: inherit !important;\r\n\t\t\tline-height: inherit !important;\r\n\t\t}\r\n\r\n\t\t/* What it does: Prevents Gmail from displaying a download button on large, non-linked images. */\r\n\t\t.a6S {\r\n\t\t\tdisplay: none !important;\r\n\t\t\topacity: 0.01 !important;\r\n\t\t}\r\n\r\n\t\t/* What it does: Prevents Gmail from changing the text color in conversation threads. */\r\n\t\t.im {\r\n\t\t\tcolor: inherit !important;\r\n\t\t}\r\n\r\n\t\t/* If the above doesn't work, add a .g-img class to any image in question. */\r\n\t\timg.g-img+div {\r\n\t\t\tdisplay: none !important;\r\n\t\t}\r\n\r\n\t\t/* What it does: Removes right gutter in Gmail iOS app: https://github.com/TedGoas/Cerberus/issues/89  */\r\n\t\t/* Create one of these media queries for each additional viewport size you'd like to fix */\r\n\r\n\t\t/* iPhone 4, 4S, 5, 5S, 5C, and 5SE */\r\n\t\t@media only screen and (min-device-width: 320px) and (max-device-width: 374px) {\r\n\t\t\tu~div .email-container {\r\n\t\t\t\tmin-width: 320px !important;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* iPhone 6, 6S, 7, 8, and X */\r\n\t\t@media only screen and (min-device-width: 375px) and (max-device-width: 413px) {\r\n\t\t\tu~div .email-container {\r\n\t\t\t\tmin-width: 375px !important;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* iPhone 6+, 7+, and 8+ */\r\n\t\t@media only screen and (min-device-width: 414px) {\r\n\t\t\tu~div .email-container {\r\n\t\t\t\tmin-width: 414px !important;\r\n\t\t\t}\r\n\t\t}\r\n\t</style>\r\n\r\n\t<!-- CSS Reset : END -->\r\n\r\n\t<!-- Progressive Enhancements : BEGIN -->\r\n\t<style>\r\n\t\t.primary {\r\n\t\t\tbackground: #f34949;\r\n\t\t}\r\n\r\n\t\t.bg_white {\r\n\t\t\tbackground: #ffffff;\r\n\t\t}\r\n\r\n\t\t.bg_light {\r\n\t\t\tbackground: #f7fafa;\r\n\t\t}\r\n\r\n\t\t.bg_black {\r\n\t\t\tbackground: #000000;\r\n\t\t}\r\n\r\n\t\t.bg_dark {\r\n\t\t\tbackground: rgba(0, 0, 0, .8);\r\n\t\t}\r\n\r\n\t\t.email-section {\r\n\t\t\tpadding: 2.5em;\r\n\t\t}\r\n\r\n\t\t/*BUTTON*/\r\n\t\t.btn {\r\n\t\t\tpadding: 3px 10px;\r\n\t\t\tdisplay: inline-block;\r\n\t\t}\r\n\r\n\t\t.btn.btn-primary {\r\n\t\t\tborder-radius: 5px;\r\n\t\t\tbackground: #f34949;\r\n\t\t\tcolor: #ffffff;\r\n\t\t}\r\n\r\n\t\t.btn.btn-white {\r\n\t\t\tborder-radius: 5px;\r\n\t\t\tbackground: #ffffff;\r\n\t\t\tcolor: #000000;\r\n\t\t}\r\n\r\n\t\t.btn.btn-white-outline {\r\n\t\t\tborder-radius: 5px;\r\n\t\t\tbackground: transparent;\r\n\t\t\tborder: 1px solid #fff;\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\r\n\t\t.btn.btn-black-outline {\r\n\t\t\tborder-radius: 0px;\r\n\t\t\tbackground: transparent;\r\n\t\t\tborder: 2px solid #000;\r\n\t\t\tcolor: #000;\r\n\t\t\tfont-weight: 700;\r\n\t\t}\r\n\r\n\t\t.btn-custom {\r\n\t\t\tcolor: rgba(0, 0, 0, .3);\r\n\t\t\ttext-decoration: underline;\r\n\t\t}\r\n\r\n\t\th1,\r\n\t\th2,\r\n\t\th3,\r\n\t\th4,\r\n\t\th5,\r\n\t\th6 {\r\n\t\t\tfont-family: 'Work Sans', sans-serif;\r\n\t\t\tcolor: #000000;\r\n\t\t\tmargin-top: 0;\r\n\t\t\tfont-weight: 400;\r\n\t\t}\r\n\r\n\t\tbody {\r\n\t\t\tfont-family: 'Work Sans', sans-serif;\r\n\t\t\tfont-weight: 400;\r\n\t\t\tfont-size: 15px;\r\n\t\t\tline-height: 1.8;\r\n\t\t\tcolor: rgba(0, 0, 0, .4);\r\n\t\t}\r\n\r\n\t\ta {\r\n\t\t\tcolor: #f34949;\r\n\t\t}\r\n\r\n\t\ttable {}\r\n\r\n\t\t/*LOGO*/\r\n\r\n\t\t.logo h1 {\r\n\t\t\tmargin: 0 0 20px 0;\r\n\t\t}\r\n\r\n\t\t.logo h1 a {\r\n\t\t\tcolor: #000;\r\n\t\t\tfont-size: 24px;\r\n\t\t\tfont-weight: 300;\r\n\t\t\tfont-family: 'Work Sans', sans-serif;\r\n\t\t}\r\n\r\n\t\t/*HERO*/\r\n\t\t.hero {\r\n\t\t\tposition: relative;\r\n\t\t\tz-index: 0;\r\n\t\t}\r\n\r\n\t\t.hero .text {\r\n\t\t\tcolor: rgba(0, 0, 0, .3);\r\n\t\t}\r\n\r\n\t\t.hero .text h2 {\r\n\t\t\tcolor: #000;\r\n\t\t\tfont-size: 34px;\r\n\t\t\tmargin-bottom: 15px;\r\n\t\t\tfont-weight: 300;\r\n\t\t\tline-height: 1.2;\r\n\t\t}\r\n\r\n\t\t.hero .text h3 {\r\n\t\t\tfont-size: 24px;\r\n\t\t\tfont-weight: 200;\r\n\t\t}\r\n\r\n\t\t.hero .text h2 span {\r\n\t\t\tfont-weight: 600;\r\n\t\t\tcolor: #000;\r\n\t\t}\r\n\r\n\r\n\t\t/*PRODUCT*/\r\n\t\t.product-entry {\r\n\t\t\tdisplay: block;\r\n\t\t\tposition: relative;\r\n\t\t\tfloat: left;\r\n\t\t\tpadding-top: 20px;\r\n\t\t}\r\n\r\n\t\t.product-entry .text {\r\n\t\t\twidth: calc(100% - 125px);\r\n\t\t\tpadding-left: 20px;\r\n\t\t}\r\n\r\n\t\t.product-entry .text h3 {\r\n\t\t\tmargin-bottom: 0;\r\n\t\t\tpadding-bottom: 0;\r\n\t\t}\r\n\r\n\t\t.product-entry .text p {\r\n\t\t\tmargin-top: 0;\r\n\t\t}\r\n\r\n\t\t.product-entry .text span {\r\n\t\t\tcolor: #000;\r\n\t\t\tfont-size: 14px;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t}\r\n\r\n\t\t.product-entry img,\r\n\t\t.product-entry .text {\r\n\t\t\tfloat: left;\r\n\t\t}\r\n\r\n\t\tul.social {\r\n\t\t\tpadding: 0;\r\n\t\t}\r\n\r\n\t\tul.social li {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tmargin-right: 10px;\r\n\t\t}\r\n\r\n\t\t/*FOOTER*/\r\n\r\n\t\t.footer {\r\n\t\t\tcolor: rgba(0, 0, 0, .5);\r\n\t\t}\r\n\r\n\t\t.footer .heading {\r\n\t\t\tcolor: #000;\r\n\t\t\tfont-size: 20px;\r\n\t\t}\r\n\r\n\t\t.footer ul {\r\n\t\t\tmargin: 0;\r\n\t\t\tpadding: 0;\r\n\t\t}\r\n\r\n\t\t.footer ul li {\r\n\t\t\tlist-style: none;\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t}\r\n\r\n\t\t.footer ul li a {\r\n\t\t\tcolor: rgba(0, 0, 0, 1);\r\n\t\t}\r\n\r\n\r\n\t\t@media screen and (max-width: 500px) {}\r\n\t</style>\r\n\r\n\r\n</head>\r\n\r\n<body width=\"100%\" style=\"margin: 0; padding: 0 !important; mso-line-height-rule: exactly; background-color: #f1f1f1;\">\r\n\t<center style=\"width: 100%; background-color: #f1f1f1;\">\r\n\t\t<div\r\n\t\t\tstyle=\"display: none; font-size: 1px;max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden; mso-hide: all; font-family: sans-serif;\">\r\n\t\t\t&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;\r\n\t\t</div>\r\n\t\t<div style=\"max-width: 600px; margin: 0 auto;\" class=\"email-container\">\r\n\t\t\t<!-- BEGIN BODY -->\r\n\t\t\t<table align=\"center\" role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\"\r\n\t\t\t\tstyle=\"margin: auto;\">\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td valign=\"top\" class=\"bg_white\" style=\"padding: 1em 2.5em 0 2.5em;\">\r\n\t\t\t\t\t\t<table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td class=\"logo\" style=\"text-align: left;\">\r\n\t\t\t\t\t\t\t\t\t<h1><a href=\"#\">Minimart.</a></h1>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr><!-- end tr -->\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td valign=\"middle\" class=\"hero bg_white\"\r\n\t\t\t\t\t\tstyle=\"background-image: url(https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Example_image.svg/600px-Example_image.svg.png); background-size: cover; height: 400px;\">\r\n\t\t\t\t\t\t<div class=\"overlay\"></div>\r\n\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<div class=\"text\" style=\"padding: 0 3em; text-align: center;\">\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr><!-- end tr -->\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td valign=\"middle\" class=\"hero bg_white\" style=\"padding: 2em 0 2em 0;\">\r\n\t\t\t\t\t\t<table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td style=\"padding: 0 2.5em; text-align: left;\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"text\">\r\n\t\t\t\t\t\t\t\t\t\t<h2>Exclusives Offers For Selected Product Items</h2>\r\n\t\t\t\t\t\t\t\t\t\t<h3>Amazing deals, updates, interesting news right in your inbox</h3>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr><!-- end tr -->\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class=\"bg_white\" style=\"padding: 0 0 4em 0;\">\r\n\t\t\t\t\t\t<table class=\"bg_white\" role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"\r\n\t\t\t\t\t\t\twidth=\"100%\">\r\n\t\t\t\t\t\t\t<tr style=\"border-bottom: 1px solid rgba(0,0,0,.05);\">\r\n\t\t\t\t\t\t\t\t<td valign=\"middle\" width=\"70%\" style=\"text-align:left; padding: 0 2.5em;\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"product-entry\">\r\n\t\t\t\t\t\t\t\t\t\t<img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Example_image.svg/600px-Example_image.svg.png\"\r\n\t\t\t\t\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"width: 100px; max-width: 600px; height: auto; margin-bottom: 20px; display: block;\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"text\">\r\n\t\t\t\t\t\t\t\t\t\t\t<h3>Young Woman Dress</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>S, M, L, XL</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>A small river named Duden flows by their place and supplies</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td valign=\"middle\" width=\"30%\" style=\"text-align:center; padding-right: 2.5em;\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"price\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"color: #f34949; font-size: 20px; display: block;\">$120</span>\r\n\t\t\t\t\t\t\t\t\t<span style=\"display: block;\">50% Discount</span>\r\n\t\t\t\t\t\t\t\t\t<span><a href=\"#\" class=\"btn btn-primary\">Shop now</a></span>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t<tr style=\"border-bottom: 1px solid rgba(0,0,0,.05);\">\r\n\t\t\t\t\t\t\t\t<td valign=\"middle\" width=\"70%\" style=\"text-align:left; padding: 0 2.5em;\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"product-entry\">\r\n\t\t\t\t\t\t\t\t\t\t<img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Example_image.svg/600px-Example_image.svg.png\"\r\n\t\t\t\t\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"width: 100px; max-width: 600px; height: auto; margin-bottom: 20px; display: block;\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"text\">\r\n\t\t\t\t\t\t\t\t\t\t\t<h3>Young Woman Dress</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>S, M, L, XL</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>A small river named Duden flows by their place and supplies</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td valign=\"middle\" width=\"30%\" style=\"text-align:center; padding-right: 2.5em;\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"price\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"color: #f34949; font-size: 20px; display: block;\">$120</span>\r\n\t\t\t\t\t\t\t\t\t<span style=\"display: block;\">50% Discount</span>\r\n\t\t\t\t\t\t\t\t\t<span><a href=\"#\" class=\"btn btn-primary\">Shop now</a></span>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t<tr style=\"border-bottom: 1px solid rgba(0,0,0,.05);\">\r\n\t\t\t\t\t\t\t\t<td valign=\"middle\" width=\"70%\" style=\"text-align:left; padding: 0 2.5em;\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"product-entry\">\r\n\t\t\t\t\t\t\t\t\t\t<img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Example_image.svg/600px-Example_image.svg.png\"\r\n\t\t\t\t\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"width: 100px; max-width: 600px; height: auto; margin-bottom: 20px; display: block;\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"text\">\r\n\t\t\t\t\t\t\t\t\t\t\t<h3>Young Woman Dress</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>S, M, L, XL</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>A small river named Duden flows by their place and supplies</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td valign=\"middle\" width=\"30%\" style=\"text-align:center; padding-right: 2.5em;\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"price\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"color: #f34949; font-size: 20px; display: block;\">$120</span>\r\n\t\t\t\t\t\t\t\t\t<span style=\"display: block;\">50% Discount</span>\r\n\t\t\t\t\t\t\t\t\t<span><a href=\"#\" class=\"btn btn-primary\">Shop now</a></span>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr><!-- end tr -->\r\n\t\t\t\t<!-- 1 Column Text + Button : END -->\r\n\t\t\t</table>\r\n\t\t\t<table align=\"center\" role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\"\r\n\t\t\t\tstyle=\"margin: auto;\">\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td valign=\"middle\" class=\"bg_light footer email-section\">\r\n\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td valign=\"top\" width=\"33.333%\" style=\"padding-top: 20px;\">\r\n\t\t\t\t\t\t\t\t\t<table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\r\n\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<td style=\"text-align: left; padding-right: 10px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 class=\"heading\">About</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>A small river named Duden flows by their place and supplies it with\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthe necessary regelialia.</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td valign=\"top\" width=\"33.333%\" style=\"padding-top: 20px;\">\r\n\t\t\t\t\t\t\t\t\t<table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\r\n\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<td style=\"text-align: left; padding-left: 5px; padding-right: 5px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 class=\"heading\">Contact Info</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li><span class=\"text\">203 Fake St. Mountain View, San Francisco,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCalifornia, USA</span></li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li><span class=\"text\">+2 392 3929 210</span></a></li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td valign=\"top\" width=\"33.333%\" style=\"padding-top: 20px;\">\r\n\t\t\t\t\t\t\t\t\t<table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\r\n\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<td style=\"text-align: left; padding-left: 10px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3 class=\"heading\">Useful Links</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Home</a></li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Account</a></li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Wishlist</a></li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Order</a></li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr><!-- end: tr -->\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class=\"bg_white\" style=\"text-align: center;\">\r\n\t\t\t\t\t\t<p>No longer want to receive these email? You can <a href=\"#\"\r\n\t\t\t\t\t\t\t\tstyle=\"color: rgba(0,0,0,.8);\">Unsubscribe here</a></p>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\r\n\t\t</div>\r\n\t</center>\r\n</body>\r\n\r\n</html>");
            if (isSended == true)
            {
                return Ok("Gönderildi");
            }
            else
            {
                return BadRequest();
            }
        }
        [HttpPost]
        [Route("/[controller]/[action]")]
        public async Task<IActionResult> HelperInvoiceGeneratorAsy()
        {

            var myConvertOptions = new MyConvertOptions
            {
                FooterCenter = "\" Sayfa [page] / [topage] \"",
                // HeaderHtml = "Views/pdfs/header.html",
                EnableLocalAccess = true,
                PageOrientation = Wkhtmltopdf.NetCore.Options.Orientation.Landscape,
            };
            var path = _environment.WebRootPath + "\\Upload\\" + "1.jpg";


            var order = new Order();
            _generatePdf.SetConvertOptions(myConvertOptions);
            var result = await _generatePdf.GetPdf("pdfs/invoice", order);
            return result;

        }

        [HttpPost]
        [Route("/[controller]/[action]")]
        public async Task<IActionResult> HelperReminderCardGeneratorAsy(int userId)
        {
            var data = await _CardService.GetAllAsyncR();
            var reminderCard = data.Data.Where(i => i.CreatedDate < DateTime.Now.AddDays(-7)).FirstOrDefault();
            var user = _AppUserService.GetByIdAsyncR(userId);

            if (reminderCard == null)
                return Ok();
            var isSended = HelperFunctions.EmailSender("bunyamingurmuc@gmail.com", "mqbdazepqwodgncl",
                "mahmutgurmuc@gmail.com", "dsadas",
                EmailMarketingTemplateGenerator.CardReminderGenerator(reminderCard, user.Result.Data));
            if (isSended == true)

                return Ok("Gönderildi");
            return BadRequest();
        }
    }
}
